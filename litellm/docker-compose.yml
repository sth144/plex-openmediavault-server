version: '3.8'

services:
  litellm:
    image: ghcr.io/berriai/litellm:main-stable
    container_name: litellm
    ports:
      - "4000:4000"
    environment:
      - LITELLM_CONFIG_PATH=/app/litellm.config.yaml
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - LITELLM_DISABLE_DB=true       # ðŸ‘ˆ disable DB completely
      - LITELLM_BYPASS_AUTH=true      # ðŸ‘ˆ bypass API key auth
      - LITELLM_PROXY_DISABLE_AUTH=true
    volumes:
      - /home/sthinds/Volumes/litellm/litellm.config.yaml:/app/litellm.config.yaml
    entrypoint: >
      litellm --config /app/litellm.config.yaml --port 4000 
    restart: unless-stopped
  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: open-webui
    ports:
      - "3001:8080"
    volumes:
      - /home/sthinds/Volumes/litellm/open-webui:/app/backend/data
    environment:
      - OPENAI_API_BASE_URL=http://192.168.1.245:4000/v1
      - DEFAULT_OPENAI_API_KEY=dummy
      - 'WEBUI_SECRET_KEY='
      - 'OLLAMA_BASE_URL=http://192.168.1.235:11434'
    depends_on:
      - litellm
    restart: unless-stopped
    extra_hosts:
      - host.docker.internal:host-gateway

